import{a as I,t as D}from"../chunks/CYzGmoqq.js";import{p as q,s as h,a as o,f as C,b as F,g as a,c as l,d,r as c,n as H,t as K}from"../chunks/jrd53t_p.js";import{d as L,s as M}from"../chunks/QhLY4lF0.js";import{e as $,b as T,r as S,i as z,s as Q}from"../chunks/sY6EwKUg.js";import{p as m}from"../chunks/B5lqDMCk.js";import{o as X}from"../chunks/DowloLFP.js";const Y=async(f,e,n,r,t,i)=>{e==null||e.setItem("subject",a(n)),e==null||e.setItem("username",a(r));const p=await fetch(`${t}/test/jwt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sub:a(n),username:a(r),exp:Math.floor(new Date().setDate(new Date().getDate()+a(i))/1e3)})}),u=await p.json();p.status===200&&(e==null||e.setItem("jwt",u.data))};var Z=async(f,e,n)=>{const r=e==null?void 0:e.getItem("jwt");console.log(r);const t=await fetch(`${n}/test/auth`,{headers:{Authorization:`Bearer ${r}`}});console.log(t);const i=await t.json();console.log(i)},tt=D("<li><a> </a></li>"),et=D("<p> </p> <ul></ul>",1),at=D('<h1>Known Socially</h1> <a href="./admin">Admin</a> <div><span>Create JWT</span> <input type="text" placeholder="Subject"> <input type="text" placeholder="Username"> <input type="number" placeholder="Expiration"> <button>Generate</button></div> <div><span>Test JWT auth</span> <button>Test Auth</button></div> <h2>Routes</h2> <!> <h2>Welcome to SvelteKit</h2> <p>Visit <a href="https://svelte.dev/docs/kit">svelte.dev/docs/kit</a> to read the documentation</p>',1);function ct(f,e){q(e,!0);const n="http://localhost:8080";let r=h(m({}));X(async function(){let v=await(await fetch(`${n}/api`)).json();l(r,m(v.data))});const t=typeof window<"u"?window.localStorage:null;let i=h(m((t==null?void 0:t.getItem("subject"))||"")),p=h(m((t==null?void 0:t.getItem("username"))||"")),u=h(m((t==null?void 0:t.getItem("days"))||5));var J=at(),_=o(C(J),4),b=o(d(_),2);S(b);var g=o(b,2);S(g);var w=o(g,2);S(w);var B=o(w,2);B.__click=[Y,t,i,p,n,u],c(_);var j=o(_,2),E=o(d(j),2);E.__click=[Z,t,n],c(j);var G=o(j,4);$(G,17,()=>Object.entries(a(r)),z,(s,v)=>{let N=()=>a(v)[0],P=()=>a(v)[1];var W=et(),y=C(W),R=d(y,!0);c(y);var A=o(y,2);$(A,21,P,z,(U,O)=>{var x=tt(),k=d(x),V=d(k,!0);c(k),c(x),K(()=>{Q(k,"href",a(O)),M(V,a(O))}),I(U,x)}),c(A),K(()=>M(R,N())),I(s,W)}),H(4),T(b,()=>a(i),s=>l(i,s)),T(g,()=>a(p),s=>l(p,s)),T(w,()=>a(u),s=>l(u,s)),I(f,J),F()}L(["click"]);export{ct as component};
