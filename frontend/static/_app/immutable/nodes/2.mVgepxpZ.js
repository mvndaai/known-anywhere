import{a as B,t as F}from"../chunks/DlIn1gWU.js";import{z as ne,A as se,B as me,e as z,m as xe,r as k,K as Te,d as m,a4 as be,a5 as ie,J as P,I as W,t as O,L as Se,a6 as V,a7 as ge,n as we,a8 as Ne,P as ye,a9 as oe,aa as De,O as Ce,ab as Me,q as Le,D as Oe,R as Re,ac as je,ad as He,ae as X,af as Q,ag as Je,s as fe,ah as Ee,i as Ve,ai as qe,aj as Be,F as Pe,ak as We,al as Ge,h as Ke,am as Ue,an as Ye,k as ze,ao as $e,v as Fe,ap as H,a1 as T,w as le,x as Xe,c as J,a2 as R,a3 as C,a0 as ue}from"../chunks/Rts0-ZlK.js";import{d as Qe,s as ve}from"../chunks/eG6FP_pp.js";import{p as j}from"../chunks/0HNuQjLK.js";import{o as Ze}from"../chunks/CZuw5MZq.js";let ce=!1;function Ae(){ce||(ce=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const t of e.target.elements)(a=t.__on_r)==null||a.call(t)})},{capture:!0}))}function ea(e){var a=me,t=z;ne(null),se(null);try{return e()}finally{ne(a),se(t)}}function aa(e,a,t,s=t){e.addEventListener(a,()=>ea(t));const r=e.__on_r;r?e.__on_r=()=>{r(),s(!0)}:e.__on_r=()=>s(!0),Ae()}function _e(e,a){return a}function ta(e,a,t,s){for(var r=[],n=a.length,f=0;f<n;f++)De(a[f].e,r,!0);var d=n>0&&r.length===0&&t!==null;if(d){var p=t.parentNode;Ce(p),p.append(t),s.clear(),S(e,a[0].prev,a[n-1].next)}Me(r,()=>{for(var y=0;y<n;y++){var _=a[y];d||(s.delete(_.k),S(e,_.prev,_.next)),Le(_.e,!d)}})}function de(e,a,t,s,r,n=null){var f=e,d={flags:a,items:new Map,first:null},p=(a&Ee)!==0;if(p){var y=e;f=k?P(Oe(y)):y.appendChild(Re())}k&&Te();var _=null,w=!1,A=je(()=>{var i=t();return Ve(i)?i:i==null?[]:ye(i)});xe(()=>{var i=m(A),l=i.length;if(w&&l===0)return;w=l===0;let v=!1;if(k){var b=f.data===be;b!==(l===0)&&(f=ie(),P(f),W(!1),v=!0)}if(k){for(var c=null,h,g=0;g<l;g++){if(O.nodeType===8&&O.data===Se){f=O,v=!0,W(!1);break}var E=i[g],o=s(E,g);h=Ie(O,d,c,null,E,o,g,r,a),d.items.set(o,h),c=h}l>0&&P(ie())}if(!k){var u=me;ra(i,d,f,r,a,(u.f&V)!==0,s)}n!==null&&(l===0?_?ge(_):_=we(()=>n(f)):_!==null&&Ne(_,()=>{_=null})),v&&W(!0),m(A)}),k&&(f=O)}function ra(e,a,t,s,r,n,f,d){var Z,ee,ae,te;var p=(r&qe)!==0,y=(r&(X|Q))!==0,_=e.length,w=a.items,A=a.first,i=A,l,v=null,b,c=[],h=[],g,E,o,u;if(p)for(u=0;u<_;u+=1)g=e[u],E=f(g,u),o=w.get(E),o!==void 0&&((Z=o.a)==null||Z.measure(),(b??(b=new Set)).add(o));for(u=0;u<_;u+=1){if(g=e[u],E=f(g,u),o=w.get(E),o===void 0){var q=i?i.e.nodes_start:t;v=Ie(q,a,v,v===null?a.first:v.next,g,E,u,s,r),w.set(E,v),c=[],h=[],i=v.next;continue}if(y&&na(o,g,u,r),o.e.f&V&&(ge(o.e),p&&((ee=o.a)==null||ee.unfix(),(b??(b=new Set)).delete(o))),o!==i){if(l!==void 0&&l.has(o)){if(c.length<h.length){var N=h[0],I;v=N.prev;var M=c[0],D=c[c.length-1];for(I=0;I<c.length;I+=1)he(c[I],N,t);for(I=0;I<h.length;I+=1)l.delete(h[I]);S(a,M.prev,D.next),S(a,v,M),S(a,D,N),i=N,v=D,u-=1,c=[],h=[]}else l.delete(o),he(o,i,t),S(a,o.prev,o.next),S(a,o,v===null?a.first:v.next),S(a,v,o),v=o;continue}for(c=[],h=[];i!==null&&i.k!==E;)(n||!(i.e.f&V))&&(l??(l=new Set)).add(i),h.push(i),i=i.next;if(i===null)continue;o=i}c.push(o),v=o,i=o.next}if(i!==null||l!==void 0){for(var x=l===void 0?[]:ye(l);i!==null;)(n||!(i.e.f&V))&&x.push(i),i=i.next;var L=x.length;if(L>0){var ke=r&Ee&&_===0?t:null;if(p){for(u=0;u<L;u+=1)(ae=x[u].a)==null||ae.measure();for(u=0;u<L;u+=1)(te=x[u].a)==null||te.fix()}ta(a,x,ke,w)}}p&&He(()=>{var re;if(b!==void 0)for(o of b)(re=o.a)==null||re.apply()}),z.first=a.first&&a.first.e,z.last=v&&v.e}function na(e,a,t,s){s&X&&oe(e.v,a),s&Q?oe(e.i,t):e.i=t}function Ie(e,a,t,s,r,n,f,d,p,y){var _=(p&X)!==0,w=(p&Be)===0,A=_?w?Je(r):fe(r):r,i=p&Q?fe(f):f,l={i,v:A,k:n,a:null,e:null,prev:t,next:s};try{return l.e=we(()=>d(e,A,i),k),l.e.prev=t&&t.e,l.e.next=s&&s.e,t===null?a.first=l:(t.next=l,t.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function he(e,a,t){for(var s=e.next?e.next.e.nodes_start:t,r=a?a.e.nodes_start:t,n=e.e.nodes_start;n!==s;){var f=Pe(n);r.before(n),n=f}}function S(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function G(e){if(k){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;$(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var r=e.checked;$(e,"checked",null),e.checked=r}}};e.__on_r=t,We(t),Ae()}}function $(e,a,t,s){var r=e.__attributes??(e.__attributes={});k&&(r[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||r[a]!==(r[a]=t)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Ge]=t),t==null?e.removeAttribute(a):typeof t!="string"&&sa(e).includes(a)?e[a]=t:e.setAttribute(a,t))}var pe=new Map;function sa(e){var a=pe.get(e.nodeName);if(a)return a;pe.set(e.nodeName,a=[]);for(var t,s=e,r=Element.prototype;r!==s;){t=Ue(s);for(var n in t)t[n].set&&a.push(n);s=Ke(s)}return a}function K(e,a,t=a){var s=Ye();aa(e,"input",r=>{var n=r?e.defaultValue:e.value;if(n=U(e)?Y(n):n,t(n),s&&n!==(n=a())){var f=e.selectionStart,d=e.selectionEnd;e.value=n??"",d!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(d,e.value.length))}}),(k&&e.defaultValue!==e.value||ze(a)==null&&e.value)&&t(U(e)?Y(e.value):e.value),$e(()=>{var r=a();U(e)&&r===Y(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function U(e){var a=e.type;return a==="number"||a==="range"}function Y(e){return e===""?null:+e}const ia=async(e,a,t,s,r,n)=>{const d=await(await fetch(`${a}/test/jwt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sub:m(t),username:m(s),exp:Math.floor(new Date().setDate(new Date().getDate()+m(r))/1e3)})})).json();n==null||n.setItem("subject",m(t)),n==null||n.setItem("username",m(s)),n==null||n.setItem("jwt",d.data)};var oa=F("<li><a> </a></li>"),fa=F("<p> </p> <ul></ul>",1),la=async(e,a,t)=>{const s=a==null?void 0:a.getItem("jwt");console.log(s);const r=await fetch(`${t}/test/auth`,{headers:{Authorization:`Bearer ${s}`}});console.log(r);const n=await r.json();console.log(n)},ua=F('<h1>Welcome to SvelteKit</h1> <p>Visit <a href="https://svelte.dev/docs/kit">svelte.dev/docs/kit</a> to read the documentation</p> <h1>Routes</h1> <!> <div><span>Create JWT</span> <input type="text" placeholder="Subject"> <input type="text" placeholder="Username"> <input type="text" placeholder="Username"> <button>Generate</button></div> <div><span>Test JWT auth</span> <button>Generate</button></div>',1);function pa(e,a){Fe(a,!0);const t="http://localhost:8080";let s=H(j({}));Ze(async function(){let h=await(await fetch(`${t}/api`)).json();J(s,j(h.data))});const r=typeof window<"u"?window.localStorage:null;let n=H(j((r==null?void 0:r.getItem("subject"))||"")),f=H(j((r==null?void 0:r.getItem("username"))||"")),d=H(j((r==null?void 0:r.getItem("days"))||5));var p=ua(),y=T(le(p),6);de(y,17,()=>Object.entries(m(s)),_e,(c,h)=>{let g=()=>m(h)[0],E=()=>m(h)[1];var o=fa(),u=le(o),q=R(u,!0);C(u);var N=T(u,2);de(N,21,E,_e,(I,M)=>{var D=oa(),x=R(D),L=R(x,!0);C(x),C(D),ue(()=>{$(x,"href",m(M)),ve(L,m(M))}),B(I,D)}),C(N),ue(()=>ve(q,g())),B(c,o)});var _=T(y,2),w=T(R(_),2);G(w);var A=T(w,2);G(A);var i=T(A,2);G(i);var l=T(i,2);l.__click=[ia,t,n,f,d,r],C(_);var v=T(_,2),b=T(R(v),2);b.__click=[la,r,t],C(v),K(w,()=>m(n),c=>J(n,c)),K(A,()=>m(f),c=>J(f,c)),K(i,()=>m(d),c=>J(d,c)),B(e,p),Xe()}Qe(["click"]);export{pa as component};
