import{a as I,t as q}from"../chunks/Digu5ErY.js";import"../chunks/C2ShC598.js";import{ag as J,g as o,b as c,t as $,s as _,d as f,c as i,r as m,p as A,a as H,f as W}from"../chunks/BNqRKoCc.js";import{d as N,s as B}from"../chunks/DqRyTp97.js";import{r as g,H as C}from"../chunks/C__STv5G.js";import{l as M,b as T}from"../chunks/mu94ieA6.js";import{i as z,p as E}from"../chunks/D--12SZY.js";function D(t,a,e){if(t.multiple)return K(t,a);for(var n of t.options){var r=j(n);if(z(r,a)){n.selected=!0;return}}(!e||a!==void 0)&&(t.selectedIndex=-1)}function F(t,a){J(()=>{var e=new MutationObserver(()=>{var n=t.__value;D(t,n)});return e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{e.disconnect()}})}function R(t,a,e=a){var n=!0;M(t,"change",r=>{var u=r?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(u),j);else{var v=t.querySelector(u)??t.querySelector("option:not([disabled])");s=v&&j(v)}e(s)}),J(()=>{var r=a();if(D(t,r,n),n&&r===void 0){var u=t.querySelector(":checked");u!==null&&(r=j(u),e(r))}t.__value=r,n=!1}),F(t)}function K(t,a){for(var e of t.options)e.selected=~a.indexOf(j(e))}function j(t){return"__value"in t?t.__value:t.value}var Q=q('<div class="any_request"><div class="any_request__inputs"><select><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option><option>OPTIONS</option></select> <input type="text" placeholder="URL"> <input type="text" placeholder="Headers"> <input type="text" placeholder="Body"> <button>Send</button></div> <div class="any_request__response"><pre> </pre></div></div>');function V(t){let a=_("GET"),e=_(""),n=_(""),r=_(""),u=_("");var s=Q(),v=f(s),d=f(v),h=f(d);h.value=(h.__value="GET")==null?"":"GET";var b=i(h);b.value=(b.__value="POST")==null?"":"POST";var y=i(b);y.value=(y.__value="PUT")==null?"":"PUT";var w=i(y);w.value=(w.__value="DELETE")==null?"":"DELETE";var S=i(w);S.value=(S.__value="OPTIONS")==null?"":"OPTIONS",m(d);var O=i(d,2);g(O);var l=i(O,2);g(l);var x=i(l,2);g(x);var G=i(x,2);G.__click=async()=>{const p={method:o(a)};o(n)&&o(n).length>0&&(p.headers=JSON.parse(o(n))),o(r)&&o(r).length>0&&(p.body=JSON.stringify(o(r)));const U=await(await fetch(o(e),p)).json();c(u,E(JSON.stringify(U,null,"	")))},m(v);var P=i(v,2),k=f(P),L=f(k,!0);m(k),m(P),m(s),$(()=>B(L,o(u))),R(d,()=>o(a),p=>c(a,p)),T(O,()=>o(e),p=>c(e,p)),T(l,()=>o(n),p=>c(n,p)),T(x,()=>o(r),p=>c(r,p)),I(t,s)}N(["click"]);const X=async(t,a,e,n,r,u)=>{a==null||a.setItem("subject",o(e)),a==null||a.setItem("username",o(n));const s=await fetch(`${r}/test/jwt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sub:o(e),username:o(n),exp:Math.floor(new Date().setDate(new Date().getDate()+Number(o(u)))/1e3)})}),v=await s.json();s.status===200&&(a==null||a.setItem("jwt",v.data))};var Y=async(t,a,e)=>{const n=a==null?void 0:a.getItem("jwt");console.log(n);const r=await fetch(`${e}/test/auth`,{headers:{Authorization:`Bearer ${n}`}});console.log(r);const u=await r.json();console.log(u)},Z=q('<div class="jwt_helper"><div><span>Create JWT</span> <input type="text" placeholder="Subject"> <input type="text" placeholder="Username"> <input type="number" placeholder="Expiration"> <button>Generate</button></div> <div><span>Test JWT auth</span> <button>Test Auth</button></div></div>');function ee(t,a){A(a,!0);const e=typeof window<"u"?window.localStorage:null,n="http://localhost:8080";let r=_(E((e==null?void 0:e.getItem("subject"))||"")),u=_(E((e==null?void 0:e.getItem("username"))||"")),s=_(E((e==null?void 0:e.getItem("days"))||5));var v=Z(),d=f(v),h=i(f(d),2);g(h);var b=i(h,2);g(b);var y=i(b,2);g(y);var w=i(y,2);w.__click=[X,e,r,u,n,s],m(d);var S=i(d,2),O=i(f(S),2);O.__click=[Y,e,n],m(S),m(v),T(h,()=>o(r),l=>c(r,l)),T(b,()=>o(u),l=>c(u,l)),T(y,()=>o(s),l=>c(s,l)),I(t,v),H()}N(["click"]);var te=q("<!> <!> <!>",1);function pe(t){var a=te(),e=W(a);C(e);var n=i(e,2);V(n);var r=i(n,2);ee(r,{}),I(t,a)}export{pe as component};
